{"Name":"default_namespace","Result":false,"SerializedDocument":"{\r\n  \"prefix\" : {\r\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\r\n    \"ex\" : \"https://example.org/\",\r\n    \"prov\" : \"http://www.w3.org/ns/prov#\"\r\n  },\r\n  \"defaultNamespace\" : \"https://default.org/\",\r\n  \"entity\" : {\r\n    \"ex:e\" : { }\r\n  }\r\n}","DeserializedDocument":null,"Exception":"Traceback (most recent call last):\r\n  File \"C:\\Users\\forma\\bakalarka\\python-prov\\src\\main.py\", line 38, in <module>\r\n    class_.deserialize(sys.argv[2])\r\n  File \"C:\\Users\\forma\\bakalarka\\python-prov\\src\\test_case.py\", line 21, in deserialize\r\n    document = document.deserialize(fr\"..\\data\\{self.filename}.{format_type}\", format=format_type)\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\forma\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\prov\\model.py\", line 2536, in deserialize\r\n    return serializer.deserialize(f, **args)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\forma\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\prov\\serializers\\provjson.py\", line 90, in deserialize\r\n    return json.load(stream, cls=ProvJSONDecoder, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\forma\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\__init__.py\", line 293, in load\r\n    return loads(fp.read(),\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\forma\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\__init__.py\", line 359, in loads\r\n    return cls(**kw).decode(s)\r\n           ^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\forma\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\prov\\serializers\\provjson.py\", line 105, in decode\r\n    decode_json_document(container, document)\r\n  File \"C:\\Users\\forma\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\prov\\serializers\\provjson.py\", line 191, in decode_json_document\r\n    decode_json_container(content, document)\r\n  File \"C:\\Users\\forma\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\prov\\serializers\\provjson.py\", line 210, in decode_json_container\r\n    rec_type = PROV_RECORD_IDS_MAP[rec_type_str]\r\n               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\r\nKeyError: 'defaultNamespace'","Description":"Here we get KeyError: 'defaultNamespace' exception, during the deserialization of the file in python.\r\nThis is caused by interoperability between libraries, where ProvToolbox creates file which contains 'defaultNamespace' key.\r\nThis is not supported by PROV-JSON, which states that the default namespace should be defined like this:\r\n{\r\n    \"prefix\": {\r\n        \"default\": \"http://example.org/default\",\r\n        \"ex\": \"http://example.org/\"\r\n        ...\r\n    },\r\n    ...\r\n}\r\n\r\nWhen deserializing it fails in the def decode_json_container(jc, bundle): method.\r\nWhich takes jc - json container and bundle - prov document which it creates.\r\nWhen going through the jc program iterates through every key and assigns type to it from PROV_RECORD_IDS_MAP map.\r\nThis map contains all the valid keys defined by PROV-JSON.\r\nWhen it gets to the defaultNamespace key it fails to KeyError: 'defaultNamespace' since this key is not defined by PROV-JSON.\r\n\r\nBut, the mistake happens when ProvToolbox serializes the document. ProvToolbox uses jackson library https://github.com/FasterXML/jackson for JSON serialization. \r\nIn JSON_SortedDocument.java https://github.com/lucmoreau/ProvToolbox/blob/96dd235aba6072c6e7671929b57b61088b9f6a38/modules-core/prov-jsonld/src/main/java/org/openprovenance/prov/core/json/JSON_SortedDocument.java the defaultNamespace keyword was being serialized into the file (understanding this would require deeper knowledge in how jackson library works, so I am not going to explain it here).\r\nAfter reporting this issue to the author of ProvToolbox, in commit https://github.com/lucmoreau/ProvToolbox/commit/20a9edf219e84c383d28283bc199d9ac32903687, the issue was resolved by adding the getDefaultNamespace() method and adding @JsonIgnore annotation. This annotation is used in jackson ignore this element in the process of serialization and deserialization."}