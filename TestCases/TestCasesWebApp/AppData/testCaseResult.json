{"Name":"escaped_characters","Result":false,"SerializedDocument":"{\r\n  \"prefix\": {\r\n    \"ex\": \"https://example.org/\"\r\n  },\r\n  \"entity\": {\r\n    \"ex:='(),-:;[].\": {}\r\n  }\r\n}","DeserializedDocument":"<document xmlns=\"http://www.w3.org/ns/prov#\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:prov=\"http://www.w3.org/ns/prov#\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n  \r\n    <entity xmlns:ex=\"https://example.org/\" prov:id=\"ex:\\=\\'\\(\\)\\,-\\:\\;\\[\\]\\.\"/>\r\n  \r\n</document>","Exception":null,"Description":"All the characters used should be escaped according to [PROV-N](https://www.w3.org/TR/prov-n/#prod-PN_CHARS_ESC).\r\n\r\n\\`<PN_CHARS_ESC>\t   ::=   \t\"\\\" ( \"=\" | \"'\" | \"(\" | \")\" | \",\" | \"-\" | \":\" | \";\" | \"[\" | \"]\" | \".\" )\\`\r\n\r\nWe first create a entity in Python with identifier, which has all the characters that should be escaped in local part of identifier.\r\n\r\nWhen serializing XML format, Python uses the custom XML deserializer [ProvXMLSerializer](https://github.com/trungdong/prov/blob/master/src/prov/serializers/provxml.py#L34).\r\nPython turns [ProvDocument](https://github.com/trungdong/prov/blob/1cb710a26c623c5c706b1c6945c645efd9e925c0/src/prov/model.py#L2262) representation of PROV document into [etree](https://lxml.de/tutorial.html) from [lxml](https://lxml.de/) library.\r\n\r\nWhen identifier of entity is being serialized [ProvXMLSerializer#serialize_bundle()](https://github.com/trungdong/prov/blob/1cb710a26c623c5c706b1c6945c645efd9e925c0/src/prov/serializers/provxml.py#L70) is used. Identifier is just turned into string:\r\n\\`\\`\\`\r\nidentifier = str(record._identifier) if record._identifier else None\r\n\r\nif identifier:\r\n    attrs = {_ns_prov(\"id\"): identifier}\r\nelse:\r\n    attrs = None\r\n\\`\\`\\`\r\n\r\nThen on line 129 element is created:\r\n\r\n\\`elem = etree.SubElement(xml_bundle_root, _ns_prov(rec_label), attrs)\\`\r\n\r\nThis is not right solution according to PROV-N.\r\n\r\nHow Java deserializes this document is irrelevant, because Python should not have produced document with unescaped characters in a first place.\r\n"}