{"Name":"loss_of_timezone","Result":true,"SerializedDocument":"<?xml version='1.0' encoding='ASCII'?>\r\n<prov:document xmlns:ex=\"https://example.org/\" xmlns:prov=\"http://www.w3.org/ns/prov#\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n  <prov:activity prov:id=\"ex:a\">\r\n    <prov:startTime>2023-09-08T14:12:45.109000-04:00</prov:startTime>\r\n    <prov:endTime>2023-09-08T14:12:45.109000+04:00</prov:endTime>\r\n  </prov:activity>\r\n</prov:document>","DeserializedDocument":"<document xmlns=\"http://www.w3.org/ns/prov#\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:prov=\"http://www.w3.org/ns/prov#\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n  \r\n    <activity xmlns:ex=\"https://example.org/\" prov:id=\"ex:a\">\r\n      <startTime>2023-09-08T18:12:45.109Z</startTime>\r\n      <endTime>2023-09-08T10:12:45.109Z</endTime>\r\n    </activity>\r\n  \r\n</document>","Exception":null,"Description":"Python represents the startTime and endTime as datetime.datetime(https://docs.python.org/3/library/datetime.html#datetime-objects)\r\nBecause when creating activity it uses the [_ensure_datetime()](https://github.com/trungdong/prov/blob/1cb710a26c623c5c706b1c6945c645efd9e925c0/src/prov/model.py#L34) function, which uses [dateutil.parser](https://dateutil.readthedocs.io/en/stable/parser.html). This parser returns datetime.datetime object.\r\n\r\nWhen serializing XML format, Python uses the custom XML deserializer [ProvXMLSerializer](https://github.com/trungdong/prov/blob/master/src/prov/serializers/provxml.py#L34).\r\nWhen serializing the startTime and endTime, Python uses method [ProvXMLSerializer#serialize_bundle()](https://github.com/trungdong/prov/blob/1cb710a26c623c5c706b1c6945c645efd9e925c0/src/prov/serializers/provxml.py#L70), on line 149:\r\n\r\n\\`v = value.isoformat()\\`\r\n\r\nmethod [datetime.isoformat()](https://docs.python.org/3/library/datetime.html#datetime.datetime.isoformat) is used, which does not lose the timezone.\r\n\r\nWhen deserializing XML format, Java uses [jackson](https://github.com/FasterXML/jackson) library. Default deserializer is used for startTime and endTime, where timezone is set to UTC, therefore timezone information is lost.\r\n\r\nThis was fixed by author of ProvToolbox, in the [issue](https://github.com/lucmoreau/ProvToolbox/issues/209)\r\nMore about this issue\r\n\\`\\`\\`\r\nname: Loss of timezone\r\nformat: provn\r\nserialize: python\r\ndeserialize: java\r\n\\`\\`\\` \r\n\r\nThis issue was resolved in this [commit](https://github.com/lucmoreau/ProvToolbox/commit/cad043a5aadb471bd0a460ac7957d4c440962c64) by adding [CustomXMLGregorianCalendarDeserializer](https://github.com/lucmoreau/ProvToolbox/blob/master/modules-core/prov-jsonld-xml/src/main/java/org/openprovenance/prov/core/xml/serialization/deserial/CustomXMLGregorianCalendarDeserializer.java) for xml, when deserializing startTime and endTime. "}